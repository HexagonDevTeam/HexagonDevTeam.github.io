<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game - Hexagon Development</title>
<link href="https://fonts.googleapis.com/css2?family=Lexend&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: linear-gradient(180deg,#0a1930,#132c50);
    font-family: 'Lexend', sans-serif;
    color: #fff;
    user-select: none;
}

canvas {
    background: #111;
    border: 2px solid #4da3ff;
    border-radius: 12px;
    display: block;
}

.score {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    color: #4da3ff;
    font-weight: 700;
    text-shadow: 0 0 10px rgba(77,163,255,0.5);
    pointer-events: none;
}

.game-over {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    font-size: 32px;
    text-align: center;
    color: #ff5555;
    font-weight: 700;
    text-shadow: 0 0 10px rgba(255,85,85,0.7);
}

button {
    margin-top: 16px;
    padding: 10px 18px;
    font-size: 18px;
    border-radius: 14px;
    border: none;
    cursor: pointer;
    background: linear-gradient(180deg,#4da3ff,#66c0ff);
    color: #032033;
    font-weight: 700;
}
button:hover {
    filter: brightness(1.2);
}
</style>
</head>
<body>
<div class="score" id="score">Score: 0</div>
<canvas id="gameCanvas" width="400" height="400"></canvas>
<div class="game-over" id="gameOver" style="display:none;">
    Game Over!<br>
    <button id="restartBtn">Restart</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const grid = 20;
const speed = 5; // frames per second

let snake, dx, dy, apple, score, gameOverFlag;
let lastTime = 0;

function initGame() {
    snake = [{x: 8*grid, y: 8*grid}];
    dx = grid;
    dy = 0;
    apple = spawnApple();
    score = 0;
    gameOverFlag = false;
    document.getElementById('score').textContent = 'Score: 0';
    document.getElementById('gameOver').style.display = 'none';
}

// Spawn apple avoiding snake
function spawnApple() {
    let position;
    do {
        position = {x: Math.floor(Math.random()*20)*grid, y: Math.floor(Math.random()*20)*grid};
    } while(snake.some(seg => seg.x === position.x && seg.y === position.y));
    return position;
}

function draw(time) {
    if(gameOverFlag) return;

    if(time - lastTime > 1000 / speed){
        lastTime = time;
        update();
        render();
    }

    requestAnimationFrame(draw);
}

function update(){
    const head = {x: snake[0].x + dx, y: snake[0].y + dy};

    // Collision with walls
    if(head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height){
        endGame();
        return;
    }

    // Collision with self
    if(snake.some(seg => seg.x === head.x && seg.y === head.y)){
        endGame();
        return;
    }

    snake.unshift(head);

    // Eat apple
    if(head.x === apple.x && head.y === apple.y){
        score++;
        document.getElementById('score').textContent = 'Score: ' + score;
        apple = spawnApple();
    } else {
        snake.pop();
    }
}

function render(){
    ctx.fillStyle = '#111';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Draw apple
    ctx.fillStyle = '#ff5555';
    ctx.fillRect(apple.x, apple.y, grid-2, grid-2);

    // Draw snake
    ctx.fillStyle = '#4da3ff';
    snake.forEach(seg => ctx.fillRect(seg.x, seg.y, grid-2, grid-2));
}

function endGame() {
    gameOverFlag = true;
    document.getElementById('gameOver').style.display = 'block';
}

// Arrow keys + WASD controls
document.addEventListener('keydown', e => {
    switch(e.key){
        case 'ArrowUp':
        case 'w': case 'W':
            if(dy===0){dx=0; dy=-grid;}
            break;
        case 'ArrowDown':
        case 's': case 'S':
            if(dy===0){dx=0; dy=grid;}
            break;
        case 'ArrowLeft':
        case 'a': case 'A':
            if(dx===0){dx=-grid; dy=0;}
            break;
        case 'ArrowRight':
        case 'd': case 'D':
            if(dx===0){dx=grid; dy=0;}
            break;
    }
});

document.getElementById('restartBtn').addEventListener('click', ()=>{
    initGame();
});

initGame();
requestAnimationFrame(draw);
</script>
</body>
</html>
